---
title: 統合コンテキスト
description: nene.jsがフロントエンドとバックエンド間でコンテキストを共有する方法を理解します。
order: 3
---

## 概要

nene.jsは、フロントエンドとバックエンド間でデータをシームレスに共有する統合コンテキストシステムを提供します。これにより、手動の状態同期の必要性がなくなり、ボイラープレートコードが削減されます。

<Callout type="info">
  統合コンテキストは、nene.jsを独特にするコア機能の一つです - 一度書いて、どこでも使用してください。
</Callout>

## リクエストコンテキスト

統合コンテキストを使用して、アプリケーションのどこからでもリクエスト情報にアクセスできます：

```typescript
import { useContext } from "@nene/core";

// In controller
@Controller("/api/posts")
export class PostController {
  @Get("/")
  async getPosts() {
    const { user, session } = useContext();

    if (!user) {
      throw new UnauthorizedException();
    }

    return await this.postService.findByUser(user.id);
  }
}
```

## フロントエンドのコンテキスト

Reactコンポーネントでも同じコンテキストを使用できます：

```tsx
"use client";

import { useNeneContext } from "@nene/react";

export function UserProfile() {
  const { user, isLoading } = useNeneContext();

  if (isLoading) return <Skeleton />;
  if (!user) return <LoginPrompt />;

  return <div>ようこそ、{user.name}さん！</div>;
}
```

## 利用可能なコンテキスト

| 属性      | 型                | 説明               |
| --------- | ----------------- | ------------------ |
| `user`    | `User \| null`      | 現在認証されているユーザー |
| `session` | `Session \| null`   | 現在のセッションデータ   |
| `locale`  | `string`            | 現在のロケール        |
| `theme`   | `'light' \| 'dark'` | 現在のテーマ          |

## カスタムコンテキスト

独自のデータでコンテキストを拡張できます：

```typescript
// nene.config.ts
import { defineConfig } from "@nene/core";

export default defineConfig({
  context: {
    extend: async (ctx) => ({
      ...ctx,
      tenant: await getTenantFromRequest(ctx.request),
    }),
  },
});
```

次に、どこからでもアクセスできます：

```typescript
const { tenant } = useContext();
```
